{"version":3,"sources":["webpack:///./src/app/files/files.module.ts","webpack:///./src/app/files/files.page.html","webpack:///./src/app/files/files.page.scss","webpack:///./src/app/files/files.page.ts"],"names":[],"mappings":"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","file":"files-files-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { FilesPage } from './files.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SharedModule } from '../shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FilesPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    TranslateModule.forChild()\n  ],\n  declarations: [FilesPage]\n})\nexport class FilesPageModule { }\n","module.exports = \"<ion-header>\\n  <app-header [title]=\\\"'file.title' | translate\\\" [showMenu]=\\\"false\\\" [showBack]=\\\"true\\\" [isGoBack]=\\\"back\\\"\\n    [noBorder]=\\\"true\\\">\\n  </app-header>\\n</ion-header>\\n<ion-content>\\n  <div class=\\\"tabs-list\\\" *ngIf=\\\"!showSkeleton\\\">\\n    <div class=\\\"custom-tab\\\" (click)=\\\"selectTab('images')\\\" [ngClass]=\\\"{'active-tab': activeTab == 'images'}\\\">\\n      {{ \\\"file.images\\\" | translate }}</div>\\n    <div class=\\\"custom-tab\\\" (click)=\\\"selectTab('files')\\\" [ngClass]=\\\"{'active-tab':  activeTab == 'files'}\\\">\\n      {{ \\\"file.files\\\" | translate }}\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"currentMyProject\\\" class=\\\"image-container\\\">\\n    <div *ngFor=\\\"let task of currentMyProject.tasks\\\">\\n      <ion-card *ngIf=\\\"activeTab == 'images' && (task.remarks || task.imageUrl)\\\">\\n        <ion-card-header>\\n          <h4> {{task.title}} </h4>\\n        </ion-card-header>\\n        <ion-card-content *ngIf=\\\"task.remarks && !task.imageUrl\\\">\\n          {{task.remarks}}\\n        </ion-card-content>\\n        <ion-card-content *ngIf=\\\"task.remarks && task.imageUrl\\\">\\n          <ion-row>\\n            <ion-col size=\\\"6\\\">\\n              {{task.remarks}}\\n            </ion-col>\\n            <ion-col size=\\\"6\\\">\\n              <img src=\\\"{{task.imageUrl}}\\\">\\n            </ion-col>\\n          </ion-row>\\n        </ion-card-content>\\n        <ion-card-content *ngIf=\\\"!task.remarks && task.imageUrl\\\">\\n            <ion-row>\\n              <ion-col size=\\\"6\\\">\\n                <img src=\\\"{{task.imageUrl}}\\\">\\n              </ion-col>\\n            </ion-row>\\n          </ion-card-content>\\n      </ion-card>\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"currentMyProject\\\" class=\\\"file-container\\\">\\n    <div *ngFor=\\\"let task of currentMyProject.tasks\\\">\\n      <ion-card *ngIf=\\\"activeTab == 'files' && task.file\\\" style=\\\"border-radius: 4px;\\\">\\n        <ion-card-header style=\\\"background: #e3e3e3; color: #000; padding: 10px;\\\">\\n          <h5> {{task.title}} </h5>\\n        </ion-card-header>\\n        <ion-card-content style=\\\"padding: 0px;\\\">\\n          <ion-card style=\\\"padding: 0px; border-radius: 0px;color: #000;\\\" (click)=\\\"downloadFile(task)\\\">\\n            <ion-grid>\\n              <ion-row>\\n                <ion-col style=\\\"min-width: 85%; margin: auto;\\n                          font-weight: 500; font-size: 1.2em;\\\">\\n                  {{ task.file.name}}\\n                </ion-col>\\n                <ion-col class=\\\"arrow-mark\\\">\\n                  <ion-icon name=\\\"ios-arrow-forward\\\"> </ion-icon>\\n                </ion-col>\\n              </ion-row>\\n            </ion-grid>\\n          </ion-card>\\n        </ion-card-content>\\n      </ion-card>\\n    </div>\\n  </div>\\n</ion-content>\"","module.exports = \".tabs-list {\\n  position: fixed;\\n  width: 100%;\\n  z-index: 999; }\\n\\n.custom-card {\\n  margin: 0px;\\n  background: #fff; }\\n\\n.custom-card ion-card-content {\\n    padding: 0px;\\n    font-size: 16px;\\n    color: #000; }\\n\\n.custom-tab {\\n  width: 50%;\\n  background: #fff;\\n  color: #000;\\n  float: left;\\n  padding: 10px;\\n  text-align: center;\\n  font-size: 18px;\\n  border-bottom: 2px solid #b23e33; }\\n\\n.active-tab {\\n  background: #b23e33;\\n  color: #fff; }\\n\\n.image-container {\\n  margin-top: 60px; }\\n\\n.image-container ion-card {\\n    border-radius: 1em;\\n    color: #000; }\\n\\n.image-container ion-card ion-card-header {\\n      border-bottom: 1px solid #000;\\n      margin: 0px 10px;\\n      padding: 10px; }\\n\\n.image-container ion-card ion-card-header h4 {\\n        margin-top: 5px;\\n        margin-bottom: 5px; }\\n\\n.image-container ion-card ion-card-content {\\n      padding-top: 10px; }\\n\\n.file-container {\\n  margin-top: 60px; }\\n\\n.file-container .arrow-mark {\\n    margin: auto;\\n    text-align: right;\\n    font-size: 1.5em; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy92aXNod2FuYXRoYmFkaWdlci9Eb2N1bWVudHMvYXBwcy9zbC11bm5hdGkvdW5uYXRpLWZlYi9zbC11bm5hdGktbW9iaWxlL3NyYy9hcHAvZmlsZXMvZmlsZXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZUFBZTtFQUNmLFdBQVc7RUFDWCxZQUFZLEVBQUE7O0FBRWQ7RUFFRSxXQUFXO0VBQ1gsZ0JBQWUsRUFBQTs7QUFIakI7SUFLRSxZQUFZO0lBQ1osZUFBZTtJQUNmLFdBQVcsRUFBQTs7QUFHYjtFQUNFLFVBQVM7RUFDVCxnQkFBZTtFQUNmLFdBQVc7RUFDVCxXQUFXO0VBQ1gsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsZ0NBQWdDLEVBQUE7O0FBRXBDO0VBQ0UsbUJBQW1CO0VBQ25CLFdBQVcsRUFBQTs7QUFHYjtFQUNFLGdCQUFlLEVBQUE7O0FBRGpCO0lBR0ksa0JBQWtCO0lBQ2xCLFdBQVcsRUFBQTs7QUFKZjtNQU1RLDZCQUE2QjtNQUM3QixnQkFBZ0I7TUFDaEIsYUFBYSxFQUFBOztBQVJyQjtRQVVZLGVBQWU7UUFDZixrQkFBa0IsRUFBQTs7QUFYOUI7TUFlUSxpQkFBaUIsRUFBQTs7QUFJekI7RUFFRSxnQkFBZSxFQUFBOztBQUZqQjtJQUlJLFlBQVk7SUFDWixpQkFBaUI7SUFDakIsZ0JBQWdCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9maWxlcy9maWxlcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGFicy1saXN0e1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICB6LWluZGV4OiA5OTk7XG4gIH1cbiAgLmN1c3RvbS1jYXJkXG4gIHtcbiAgICBtYXJnaW46IDBweDtcbiAgICBiYWNrZ3JvdW5kOiNmZmY7XG4gICAgaW9uLWNhcmQtY29udGVudHtcbiAgICBwYWRkaW5nOiAwcHg7XG4gICAgZm9udC1zaXplOiAxNnB4O1xuICAgIGNvbG9yOiAjMDAwO1xuICAgIH1cbiAgfVxuICAuY3VzdG9tLXRhYntcbiAgICB3aWR0aDo1MCU7XG4gICAgYmFja2dyb3VuZDojZmZmO1xuICAgIGNvbG9yOiAjMDAwO1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNiMjNlMzM7XG4gIH1cbiAgLmFjdGl2ZS10YWJ7XG4gICAgYmFja2dyb3VuZDogI2IyM2UzMztcbiAgICBjb2xvcjogI2ZmZjtcbiAgfVxuXG4gIC5pbWFnZS1jb250YWluZXJ7XG4gICAgbWFyZ2luLXRvcDo2MHB4O1xuICAgIGlvbi1jYXJke1xuICAgICAgYm9yZGVyLXJhZGl1czogMWVtO1xuICAgICAgY29sb3I6ICMwMDA7XG4gICAgICBpb24tY2FyZC1oZWFkZXJ7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMwMDA7XG4gICAgICAgICAgbWFyZ2luOiAwcHggMTBweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgICAgaDR7XG4gICAgICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgICAgICAgfVxuICAgICAgfVxuICAgICAgaW9uLWNhcmQtY29udGVudHtcbiAgICAgICAgICBwYWRkaW5nLXRvcDogMTBweDs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC5maWxlLWNvbnRhaW5lclxuICB7XG4gICAgbWFyZ2luLXRvcDo2MHB4O1xuICAgIC5hcnJvdy1tYXJre1xuICAgICAgbWFyZ2luOiBhdXRvO1xuICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgICBmb250LXNpemU6IDEuNWVtO1xuICAgIH1cbiAgfSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { CreateTaskService } from '../create-task/create-task.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { Platform } from '@ionic/angular';\nimport { Base64 } from '@ionic-native/base64/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport { FileChooser } from '@ionic-native/file-chooser/ngx';\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\ndeclare var cordova: any;\n\n@Component({\n  selector: 'app-files',\n  templateUrl: './files.page.html',\n  styleUrls: ['./files.page.scss'],\n})\nexport class FilesPage implements OnInit {\n  currentMyProject;\n  activeTab = 'images';\n  isIos;\n  appFolderPath;\n  back = 'project-view/project-detail/my_projects';\n  constructor(public createTaskService: CreateTaskService,\n    public route: ActivatedRoute,\n    public platform: Platform,\n    public transfer: FileTransfer,\n    public base64: Base64,\n    public fileChooser: FileChooser,\n    public file: File,\n    public fileOpener: FileOpener\n  ) {\n    route.params.subscribe(params => {\n      this.getCurrentProject(params.id);\n    })\n  }\n\n  ngOnInit() {\n    this.platform.ready().then(() => {\n      this.isIos = this.platform.is('ios') ? true : false;\n      this.appFolderPath = this.isIos ? this.file.documentsDirectory  : this.file.externalApplicationStorageDirectory;\n    })\n  }\n  public getCurrentProject(id) {\n    this.createTaskService.getProjectById(id).then(project => {\n      if (project.tasks && project.tasks.length > 0) {\n        project.tasks.forEach(task => {\n          if (task.imageUrl) {\n            task.imageUrl = 'data:image/jpeg;base64,' + task.imageUrl\n          }\n        });\n      }\n      this.currentMyProject = project;\n    })\n  }\n  public selectTab(type) {\n    this.activeTab = type;\n  }\n  downloadFile(task) {     \n    fetch(task.file.url,\n      {\n        method: \"GET\"\n      }).then(res => res.blob()).then(blob => {\n        this.appFolderPath = decodeURIComponent(this.appFolderPath);\n        task.file.name = decodeURIComponent(task.file.name);\n        this.file.writeFile(this.appFolderPath,task.file.name,blob, { replace: true }).then(res => {\n          this.fileOpener.open(\n            res.toInternalURL(),\n            'application/pdf'\n          ).then((res) => {\n            console.log(res, 'sucess');\n          }).catch(err => {\n            console.log(err, 'error');\n          });\n        }).catch(err => {\n          console.log('error in catch');\n        });\n      }).catch(err => {\n        console.log('error');\n      });\n  }\n}\n"],"sourceRoot":""}